<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Leaf - Estatística</title>

    <script src="js/estatisticaPage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="icon" href="../../assets/icon/logo.svg">
    <link rel="stylesheet" href="./css/estatisticaPage.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
</head>

<body>
    <!-- PAG MENU -->
    <div class="container">

        <div class="lateral">
            <!-- parte de cima -->
            <div class="listaBaixo">
                <div class="navegacão">
                    <div class="navHeader">
                        <img src="../../public/assets/icon/logo.svg">
                        <span>MENU</span>
                    </div>
                    <ul>
                        <li class="lista">
                            <a href="dashboardPage.html">
                                <i class="uil uil-create-dashboard"></i>
                                <span class="lista">Dashboard</span>
                            </a>
                        </li>
                        <li class="lista destaque">
                            <a href="estatisticaPage.html">
                                <i class="uil uil-presentation-line est"></i>
                                <span class="lista">Estatística</span>
                            </a>
                        </li>
                        <li class="lista">
                            <a href="historicoPage.html">
                                <i class="uil uil-history"></i>
                                <span class="lista">Histórico</span>
                            </a>
                        </li>
                    </ul>
                    <div class="inferior-menu" style="background-image: url(../assets/imgs/VectorPéMenu.svg);">
                        <ul style="height: fit-content;">
                            <li class="lista">
                                <a href="cadastrarUsuario.html">
                                    <i class="uil uil-plus-circle"></i>
                                    <span class="lista" style="font-size: 15px;">Cadastrar usuario</span>
                                </a>
                            </li>
                            <li class="lista">
                                <a href="cadastrarEstufa.html">
                                    <i class="uil uil-plus-circle"></i>
                                    <span class="lista" style="font-size: 15px;">Cadastrar estufa</span>
                                </a>
                            </li>
                            <!-- <img src="imgs/VectorPéMenu.svg" alt=""> -->
                        </ul>
                    </div>
    
                </div>
    
            </div>
        </div>
        <!-- FIM DO MENU -->
    
        <!-- parte do tela -->
        <div class="tela">
            <div class="top">
                <div class="top-left">
                    <span class="topo">Cadastro de Estufa</span>
                </div>
                <div class="nomeNome">
                    <img src="../../public/assets/imgs/Ellipse2325.png">
                    <ul class="ul2">
                        <span class="ismalendas">
                            <span id="loginUsuario"></span>
                            <span>NomeUsuário</span>
                        </span>
                    </ul>
                </div>
            </div>
            <div class="areaDash">
                <div>
                    <div class="alertsParametro">
                        <div class="urgente">
                            <img src="../../public/assets/imgs/vetorUrgente.svg">
                            <div class="span-urgente">
                                <span class="urgenteText">CRÍTICO</span>
                                <span>350lm - 450lm</span>
                                <span>650lm - 800lm</span>
                            </div>
                        </div>
                        <div class="preocupante">
                            <img src="../../public/assets/imgs/VectorNewProcupante.svg" width="30px">
                            <div class="span-preocupante">
                                <span class="criticoText">PREOCUPANTE</span>
                                <span>450lm - 500lm</span>
                                <span>600lm - 650lm</span>
                            </div>
                        </div>
                
                        <div class="adequado">
                            <img src="../../public/assets/imgs/vetorAdequado.svg">
                            <div class="span-adequado">
                                <span class="adequadoText">ADEQUADO</span>
                                <span>500lm - 600lm</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FIM DA NAV BAR -->


            <div class="listaEstufas">
                <div class="containerColTittle">
                    <span>Nome das Estufas</span>
                    <span>Qtd. de setores</span>
                </div>

                <!-- PRÓXIMA DIV ESTÁ SENDO PREENCHIDA PELO BANCO -->
                <div id="lista" class="lista">

                </div>

            </div>

        </div>
    </div>
</body>

</html>

<script>

var idUsuario = sessionStorage.idUsuario;



    window.onload = exibirEstufas();

    function exibirEstufas(){

        fetch("/usuariosEstufa/exibirEstufas", {
            method: "post",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                idUsuarioServer: idUsuario
            })
            
        }).then(function(resposta){
          resposta.json().then((json)=>{
            console.log(json)
            for(i = 0; i < json.length; i++){
                lista.innerHTML += `                    
                <details class="listaItem">
                        <summary>
                            <div class="upperPart">
                                <span id="estufaTitulo" >Estufa ${json[i].nome}</span>
                                <div class="qtdAlertas" id="quantidade_setor_estufa">
                                    <span class="urgenteText">
                                        <!-- <img src="../assets/imgs/vetorUrgente.svg"> -->
                                        3
                                    </span>
                                    <span class="criticoText">
                                        <!-- <img src="../assets/imgs/vectorCritico.svg"> -->
                                        <!-- 0 -->
                                    </span>
                                    <span class="preocupanteText">
                                        <!-- <img src="../assets/imgs/vectorPreocupante.svg"> -->
                                        <!-- 0 -->
                                    </span>
                                    <span class="adequadoText">
                                        <!-- <img src="../assets/imgs/vetorAdequado.svg"> -->
                                        <!-- 0 -->
                                    </span>
                                </div>
                            </div>
                        </summary>

                        <div class="lowerPart">
                            <div class="containerColsubTittle">
                                <span>NOME DO SETOR</span>
                                <span></span>
                                <span>Qtd. subsetores</span>
                            </div>

                            <div class="listaSetores" id="lista_setores_estufa">
                                <a href="setor1.html">
                                    <div class="listaSetorItem">
                                        <span class="listaSetorItemElemento">Setor 1</span>
                                        <span class="urgenteText listaSetorItemElemento">
                                            <!-- <img src="../assets/imgs/vetorUrgente.svg"> -->
                                            9
                                        </span>

                                        <!-- <span class="adequadoText listaSetorItemElemento">Ligado</span> -->

                                    </div>
                                </a>
                                <a href="setor2.html">
                                    <div class="listaSetorItem">
                                        <span class="listaSetorItemElemento">Setor 2</span>
                                        <span class="urgenteText listaSetorItemElemento">
                                            <!-- <img src="../assets/imgs/vetorUrgente.svg"> -->
                                            <!-- 2 -->
                                        </span>
                                        <span class="urgenteText listaSetorItemElemento"></span> 
                                    </div>
                                </a>
                                <a href="setor3.html">
                                    <div class="listaSetorItem">
                                        <span class="listaSetorItemElemento">Setor 3</span>
                                        <span class="urgenteText listaSetorItemElemento">
                                            <!-- <img src="../assets/imgs/vetorUrgente.svg"> -->
                                            <!-- 0lm -->
                                        </span>
                                        <span class="manutencaoText listaSetorItemElemento"></span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </details>`
            }
          })
        })
    }
</script>